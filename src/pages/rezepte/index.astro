---
import BaseLayout from '../../layouts/BaseLayout.astro';
import RecipeCard from '../../components/RecipeCard';
import { getCollection } from 'astro:content';

const recipes = (await getCollection('recipes')).filter(recipe => recipe.data.lang === 'de');

// Group recipes by category
const categories = [...new Set(recipes.map(r => r.data.category))];
---

<BaseLayout title="Wechselrezepte | Digital Independence Day" description="Schritt-f체r-Schritt Anleitungen zum Wechsel zu digitaler Unabh채ngigkeit">
	<div class="container mx-auto px-4 py-12">
		<header class="text-center mb-12">
			<h1 class="text-4xl md:text-5xl font-display font-bold mb-4">
				Wechselrezepte
			</h1>
			<p class="text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
				Schritt-f체r-Schritt Anleitungen zum Wechsel zu digitaler Unabh채ngigkeit
			</p>
		</header>

		<div class="mb-8">
			<div class="flex flex-wrap gap-3 justify-center">
				{categories.map(category => (
					<button
						class="px-4 py-2 bg-primary-100 dark:bg-primary-900 text-primary-700 dark:text-primary-300 rounded-full font-medium hover:bg-primary-200 dark:hover:bg-primary-800 transition-colors"
					>
						{category}
					</button>
				))}
			</div>
		</div>

		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
			{recipes.map((recipe) => (
				<RecipeCard recipe={recipe} client:load />
			))}
		</div>
	</div>
</BaseLayout>
